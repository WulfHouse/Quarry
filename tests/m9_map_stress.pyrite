# M9 Map Stress Test

import std.collections.map

fn main():
    # Use generic Map API
    var my_map: Map[int, int] = Map.new()
    let iterations = 100
    
    print("Starting Map stress test...")
    
    # Insert values
    for i in 0..iterations:
        my_map.insert(i, i * 2)
    
    print("Inserted items.")
    
    # Verify values
    var success = true
    for i in 0..iterations:
        let expected = i * 2
        let val = my_map.get(i)
        
        if val != expected:
            print("Error: Value mismatch for key", i, ": expected", expected, "got", val)
            success = false
    
    if success:
        print("Map stress test passed!")
    else:
        print("Map stress test failed.")
    
    my_map.drop()
    
    if not success:
        # exit(1) # exit not defined? use assert or just let it fail
        pass
