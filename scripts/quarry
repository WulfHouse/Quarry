#!/usr/bin/env python3
r"""
Quarry build system - repo root entry point
Delegates to tools/runtime/quarry.py wrapper

Usage:
    python scripts/quarry <command>     # From repo root
    ./scripts/quarry <command>           # From repo root (Unix)
    .\scripts\quarry.cmd <command>       # From repo root (Windows)
"""

import sys
import importlib.util
from pathlib import Path

# Find tools directory relative to this script (now in scripts/, so go up one level)
script_dir = Path(__file__).parent.resolve()
repo_root = script_dir.parent
tools_quarry = repo_root / "tools" / "runtime" / "quarry.py"

if not tools_quarry.exists():
    print("Error: Could not find tools/runtime/quarry.py")
    print("Please run this script from the Pyrite repository root.")
    sys.exit(1)

# Import and execute the tools wrapper
spec = importlib.util.spec_from_file_location("quarry_wrapper", tools_quarry)
if spec is None or spec.loader is None:
    print("Error: Could not load tools/runtime/quarry.py")
    sys.exit(1)

module = importlib.util.module_from_spec(spec)
spec.loader.exec_module(module)

# Call main if it exists
if hasattr(module, 'main'):
    sys.exit(module.main())

